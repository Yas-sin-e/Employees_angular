<div class="container mt-4">
  <h2>Modifier un Employé :</h2>

  <form [formGroup]="editForm" (ngSubmit)="updateEmploye()">

    <div hidden>
      <label>ID Employé</label>
      <input type="number" formControlName="idEmploye" class="form-control" readonly />
    </div>

    <div class="form-group mt-2">
      <label>Nom</label>
      <input type="text" formControlName="nomEmploye" class="form-control" />
      <span *ngIf="editForm.get('nomEmploye')?.hasError('required') && editForm.get('nomEmploye')?.touched" class="text-danger">
        Nom obligatoire
      </span>
      <span *ngIf="editForm.get('nomEmploye')?.hasError('minlength') && editForm.get('nomEmploye')?.touched" class="text-danger">
        Le nom doit contenir au moins 3 caractères
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Prénom</label>
      <input type="text" formControlName="prenomEmploye" class="form-control" />
      <span *ngIf="editForm.get('prenomEmploye')?.hasError('required') && editForm.get('prenomEmploye')?.touched" class="text-danger">
        Prénom obligatoire
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Poste</label>
      <input type="text" formControlName="posteEmploye" class="form-control" />
      <span *ngIf="editForm.get('posteEmploye')?.hasError('required') && editForm.get('posteEmploye')?.touched" class="text-danger">
        Poste obligatoire
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Date d’embauche</label>
      <input type="date" formControlName="dateEmbauche" class="form-control" />
      <span *ngIf="editForm.get('dateEmbauche')?.hasError('required') && editForm.get('dateEmbauche')?.touched" class="text-danger">
        Date d’embauche obligatoire
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Salaire</label>
      <input type="number" formControlName="salaire" class="form-control" />
      <span *ngIf="editForm.get('salaire')?.hasError('required') && editForm.get('salaire')?.touched" class="text-danger">
        Salaire obligatoire
      </span>
      <span *ngIf="editForm.get('salaire')?.hasError('min') && editForm.get('salaire')?.touched" class="text-danger">
        Le salaire doit être supérieur à 0
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Email</label>
      <input type="email" formControlName="email" class="form-control" />
      <span *ngIf="editForm.get('email')?.hasError('required') && editForm.get('email')?.touched" class="text-danger">
        Email obligatoire
      </span>
      <span *ngIf="editForm.get('email')?.hasError('email') && editForm.get('email')?.touched" class="text-danger">
        Format de l’email invalide
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Téléphone</label>
      <input type="text" formControlName="telephone" class="form-control" />
      <span *ngIf="editForm.get('telephone')?.hasError('required') && editForm.get('telephone')?.touched" class="text-danger">
        Téléphone obligatoire
      </span>
      <span *ngIf="editForm.get('telephone')?.hasError('pattern') && editForm.get('telephone')?.touched" class="text-danger">
        Le numéro doit contenir exactement 8 chiffres
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Adresse</label>
      <input type="text" formControlName="adresse" class="form-control" />
      <span *ngIf="editForm.get('adresse')?.hasError('required') && editForm.get('adresse')?.touched" class="text-danger">
        Adresse obligatoire
      </span>
    </div>

    <div class="form-group mt-2">
      <label>Grade</label>
      <select class="form-control" formControlName="idGra">
        <option value="">-- Sélectionner un grade --</option>
        @for(gra of grades; track gra.idGraEmp) {
          <option [value]="gra.idGraEmp">{{ gra.nomGraEmp }} - {{ gra.niveau }}</option>
        }
      </select>
      <span *ngIf="editForm.get('idGra')?.hasError('required') && editForm.get('idGra')?.touched" class="text-danger">
        Grade obligatoire
      </span>
    </div>

    <div class="mt-3">
      <button type="submit" class="btn btn-success" [disabled]="editForm.invalid">
        Modifier
      </button>
    </div>
  </form>
</div>
