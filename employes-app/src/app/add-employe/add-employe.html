<div class="container mt-4">
  <h2>Ajouter un Employé :</h2>

  <form [formGroup]="empForm" (ngSubmit)="addEmploye()">

    <!-- ID Employé -->
    <div class="form-group mt-2">
      <label>ID Employé</label>
      <input type="text" formControlName="idEmploye" class="form-control" />
      <span *ngIf="empForm.get('idEmploye')?.hasError('required') && empForm.get('idEmploye')?.touched" class="text-danger">
        ID Employé est obligatoire
      </span>
    </div>

    <!-- Nom -->
    <div class="form-group mt-2">
      <label>Nom</label>
      <input type="text" formControlName="nomEmploye" class="form-control" />
      <span *ngIf="empForm.get('nomEmploye')?.hasError('required') && empForm.get('nomEmploye')?.touched" class="text-danger">
        Nom est obligatoire
      </span>
      <span *ngIf="empForm.get('nomEmploye')?.hasError('minlength') && empForm.get('nomEmploye')?.touched" class="text-danger">
        Le nom doit contenir au moins 3 caractères
      </span>
    </div>

    <!-- Prénom -->
    <div class="form-group mt-2">
      <label>Prénom</label>
      <input type="text" formControlName="prenomEmploye" class="form-control" />
      <span *ngIf="empForm.get('prenomEmploye')?.hasError('required') && empForm.get('prenomEmploye')?.touched" class="text-danger">
        Prénom est obligatoire
      </span>
    </div>

    <!-- Poste -->
    <div class="form-group mt-2">
      <label>Poste</label>
      <input type="text" formControlName="posteEmploye" class="form-control" />
      <span *ngIf="empForm.get('posteEmploye')?.hasError('required') && empForm.get('posteEmploye')?.touched" class="text-danger">
        Poste est obligatoire
      </span>
    </div>

    <!-- Date d’embauche -->
    <div class="form-group mt-2">
      <label>Date d’embauche</label>
      <input type="date" formControlName="dateEmbauche" class="form-control" />
      <span *ngIf="empForm.get('dateEmbauche')?.hasError('required') && empForm.get('dateEmbauche')?.touched" class="text-danger">
        Date d’embauche est obligatoire
      </span>
    </div>

    <!-- Salaire -->
    <div class="form-group mt-2">
      <label>Salaire</label>
      <input type="number" formControlName="salaire" class="form-control" />
      <span *ngIf="empForm.get('salaire')?.hasError('required') && empForm.get('salaire')?.touched" class="text-danger">
        Salaire est obligatoire
      </span>
      <span *ngIf="empForm.get('salaire')?.hasError('min') && empForm.get('salaire')?.touched" class="text-danger">
        Le salaire doit être supérieur à 0
      </span>
    </div>

    <!-- Email -->
    <div class="form-group mt-2">
      <label>Email</label>
      <input type="email" formControlName="email" class="form-control" />
      <span *ngIf="empForm.get('email')?.hasError('required') && empForm.get('email')?.touched" class="text-danger">
        Email est obligatoire
      </span>
      <span *ngIf="empForm.get('email')?.hasError('email') && empForm.get('email')?.touched" class="text-danger">
        Format de l’email invalide
      </span>
    </div>

    <!-- Téléphone -->
    <div class="form-group mt-2">
      <label>Téléphone</label>
      <input type="text" formControlName="telephone" class="form-control" />
      <span *ngIf="empForm.get('telephone')?.hasError('required') && empForm.get('telephone')?.touched" class="text-danger">
        Téléphone est obligatoire
      </span>
      <span *ngIf="empForm.get('telephone')?.hasError('pattern') && empForm.get('telephone')?.touched" class="text-danger">
        Le numéro doit contenir exactement 8 chiffres
      </span>
    </div>

   
    <div class="form-group mt-2">
      <label>Adresse</label>
      <input type="text" formControlName="adresse" class="form-control" />
      <span *ngIf="empForm.get('adresse')?.hasError('required') && empForm.get('adresse')?.touched" class="text-danger">
        Adresse est obligatoire
      </span>
    </div>


    <div class="form-group mt-2">
      <label>Grade</label>
      <select class="form-control" formControlName="idGra">
        <option value="">-- Sélectionner un grade --</option>
        @for(Gra of grades; track Gra.idGraEmp){
          <option [value]="Gra.idGraEmp">{{ Gra.nomGraEmp }}</option>
        }
      </select>
      <span *ngIf="empForm.get('idGra')?.hasError('required') && empForm.get('idGra')?.touched" class="text-danger">
        Grade est obligatoire
      </span>
    </div>

    <div class="mt-3">
      <button type="submit" class="btn btn-success" [disabled]="empForm.invalid">
        Ajouter
      </button>
    </div>

  </form>
</div>
